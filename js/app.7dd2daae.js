(function(){"use strict";var t={3857:function(t,s,e){var a=e(6848),i=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},o=[],r=e(1656),n={},c=(0,r.A)(n,i,o,!1,null,null,null),l=c.exports,d=e(6178),u=function(){var t=this,s=t._self._c;return s("div",{staticClass:"login"},[s("van-nav-bar",{attrs:{title:"会员登录","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"form-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],staticClass:"inp",attrs:{maxlength:"11",placeholder:"请输入手机号码",type:"text"},domProps:{value:t.mobile},on:{input:function(s){s.target.composing||(t.mobile=s.target.value)}}})]),s("div",{staticClass:"form-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.picCode,expression:"picCode"}],staticClass:"inp",attrs:{maxlength:"5",placeholder:"请输入图形验证码",type:"text"},domProps:{value:t.picCode},on:{input:function(s){s.target.composing||(t.picCode=s.target.value)}}}),t.picUrl?s("img",{attrs:{src:t.picUrl,alt:""},on:{click:function(s){return t.getImg()}}}):t._e()]),s("div",{staticClass:"form-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],staticClass:"inp",attrs:{placeholder:"请输入短信验证码",type:"text"},domProps:{value:t.smsCode},on:{input:function(s){s.target.composing||(t.smsCode=s.target.value)}}}),s("button",{ref:"btn",on:{click:t.getCode}},[t._v(" "+t._s(60===t.countDown?"获取验证码":t.countDown+"秒后重新发送")+" ")])])]),s("div",{staticClass:"login-btn",on:{click:t.login}},[t._v("登录")])])],1)},m=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"title"},[s("h3",[t._v("手机号登录")]),s("p",[t._v("未注册的手机号登录后将自动注册")])])}],v=(e(9704),e(1981)),p=(e(4114),e(3518));e(9112),e(3110);const h="storage_user_info",g=()=>JSON.parse(localStorage.getItem(h))||{userInfo:"",token:""},f=t=>{localStorage.setItem(h,JSON.stringify(t))},C="storage_search_key",y=()=>JSON.parse(localStorage.getItem(C))||[],_=t=>{localStorage.setItem(C,JSON.stringify(t))};var A={namespaced:!0,state:{userInfo:g()},mutations:{setUserInfo(t,s){t.userInfo=s,f(s)}},actions:{}};e(8111),e(1148),e(2489),e(116),e(7588),e(8237);const k=(t,s,e)=>P.post("/cart/add",{goodsId:t,goodsNum:s,goodsSkuId:e}),b=()=>P.get("/cart/list"),w=(t,s,e)=>P.post("/cart/update",{goodsId:t,goodsNum:s,goodsSkuId:e}),x=t=>P.post("/cart/clear",{cartIds:t});var L={namespaced:!0,state:{cartList:[]},mutations:{setCartList(t,s){t.cartList=s},toggleChecked(t,s){const e=t.cartList.find(t=>t.goods_id===s);e&&(e.isChecked=!e.isChecked)},allChecked(t,s){t.cartList.forEach(t=>{t.isChecked=s})},updateCartNum(t,{goodsId:s,goodsNum:e}){const a=t.cartList.find(t=>t.goods_id===s);a&&(a.goods_num=e)}},actions:{async getCartList(t){const s=await b();s.data.list.forEach(t=>{t.isChecked=!0}),t.commit("setCartList",s.data.list)},async updateCartNum(t,{goodsId:s,goodsNum:e,goodsSkuId:a}){await w(s,e,a);t.commit("updateCartNum",{goodsId:s,goodsNum:e})},async delSelect(t,s){await x(s),t.dispatch("getCartList"),(0,v.A)("删除成功")}},getters:{selGoodsCount(t,s){return s.selGoodsList.reduce((t,s)=>t+s.goods_num,0)},goodsCount(t){return t.cartList.reduce((t,s)=>t+s.goods_num,0)},selGoodsList(t){return t.cartList.filter(t=>t.isChecked)},selGoodsTotalPrice(t,s){return s.selGoodsList.reduce((t,s)=>t+s.goods_num*s.goods.goods_price_min,0).toFixed(2)},isAllChecked(t){return t.cartList.every(t=>t.isChecked)}}};a.Ay.use(p.Ay);var S=new p.Ay.Store({state:{},getters:{token(t){return t.user.userInfo.token}},mutations:{},actions:{},modules:{user:A,cart:L}}),I=e(4373);const M=I.A.create({baseURL:"https://smart-shop.itheima.net/index.php?s=/api",timeout:5e3});M.interceptors.request.use(function(t){return v.A.loading({message:"加载中...",forbidClick:!0,duration:0}),S.getters.token&&(t.headers["Access-Token"]=S.getters.token,t.headers.platform="H5"),t},function(t){return Promise.reject(t)}),M.interceptors.response.use(function(t){return 200!==t.data.status?((0,v.A)(t.data.message),Promise.reject(t.data.message)):(v.A.clear(),t.data)},function(t){return Promise.reject(t)});var P=M;const z=()=>P.get("/captcha/image"),T=t=>P({url:"captcha/sendSmsCaptcha",method:"POST",params:{form:t}}),Z=(t,s)=>P.post("/passport/login",{form:{isParty:!1,mobile:t,partyData:{},smsCode:s}});var G={name:"Login",data(){return{picUrl:"",picKey:"",countDown:60,btnActive:!0,timer:null,mobile:"",picCode:"",smsCode:""}},methods:{validFn(){return/^1[3-9]\d{9}$/.test(this.mobile)?!!/^\w{4}$/.test(this.picCode)||(this.$toast("请输入正确的图形验证码"),!1):(this.$toast("请输入正确的手机号"),!1)},async getImg(){const t=await z();this.picUrl=t.data.base64,this.picKey=t.data.key},async getCode(){if(this.btnActive){if(this.timer&&clearInterval(this.timer),!this.validFn())return;await T({captchaCode:this.picCode,captchaKey:this.picKey,mobile:this.mobile}),(0,v.A)("发送验证码成功"),this.btnActive=!1,this.timer=setInterval(()=>{this.countDown--,0===this.countDown&&(clearInterval(this.timer),this.countDown=60,this.btnActive=!0)},1e3)}},async login(){if(!this.validFn())return;if(!/^\d{6}$/.test(this.smsCode))return void this.$toast("请输入正确的手机验证码");const t=await Z(this.mobile,this.smsCode);this.$toast("登录成功"),this.$store.commit("user/setUserInfo",t.data),this.$route.query.backUrl?this.$router.replace(this.$route.query.backUrl):this.$router.push("/")}},mounted(){this.getImg()},beforeDestroy(){clearInterval(this.timer)}},K=G,J=(0,r.A)(K,u,m,!1,null,"40b3ca12",null),N=J.exports,j=function(){var t=this,s=t._self._c;return s("div",[s("router-view"),s("van-tabbar",{attrs:{"active-color":"#ee0a24",route:""},model:{value:t.active,callback:function(s){t.active=s},expression:"active"}},[s("van-tabbar-item",{attrs:{icon:"home-o",to:"/home"}},[t._v("首页")]),s("van-tabbar-item",{attrs:{icon:"apps-o",to:"/category"}},[t._v("分类页")]),s("van-tabbar-item",{attrs:{icon:"shopping-cart-o",to:"/cart"}},[t._v("购物车")]),s("van-tabbar-item",{attrs:{icon:"manager-o",to:"/user"}},[t._v("我的")])],1)],1)},E=[],O={name:"Layout",data(){return{active:1}}},U=O,F=(0,r.A)(U,j,E,!1,null,null,null),B=F.exports,q=function(){var t=this,s=t._self._c;return s("div",[t._v("myorder")])},W=[],D={name:"MyOrder"},R=D,Q=(0,r.A)(R,q,W,!1,null,null,null),V=Q.exports,$=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pay"},[s("van-nav-bar",{attrs:{fixed:"",title:"订单结算台","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("div",{staticClass:"address"},[s("div",{staticClass:"left-icon"},[s("van-icon",{attrs:{name:"logistics"}})],1),t.addressList.length>0?s("div",{staticClass:"info"},[s("div",{staticClass:"info-content"},[s("span",{staticClass:"name"},[t._v(t._s(t.addressList[0].name))]),s("span",{staticClass:"mobile"},[t._v(t._s(t.addressList[0].phone))])]),s("div",{staticClass:"info-address"},[t._v(" "+t._s(t.addressList[0].region.province)+" "+t._s(t.addressList[0].region.city)+" "+t._s(t.addressList[0].region.region)+" "+t._s(t.addressList[0].detail)+" ")])]):s("div",{staticClass:"info"},[t._v("请选择配送地址")]),s("div",{staticClass:"right-icon"},[s("van-icon",{attrs:{name:"arrow"}})],1)]),t.order.goodsList?s("div",{staticClass:"pay-list"},[s("div",{staticClass:"list"},t._l(t.order.goodsList,function(e){return s("div",{key:e.goods_id,staticClass:"goods-item"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:e.goods_image,alt:""}})]),s("div",{staticClass:"right"},[s("p",{staticClass:"tit text-ellipsis-2"},[t._v(" "+t._s(e.goods_name)+" ")]),s("p",{staticClass:"info"},[s("span",{staticClass:"count"},[t._v("x"+t._s(e.total_num))]),s("span",{staticClass:"price"},[t._v("¥"+t._s(e.total_pay_price))])])])])}),0),s("div",{staticClass:"flow-num-box"},[s("span",[t._v("共 "+t._s(t.order.orderTotalNum)+" 件商品，合计：")]),s("span",{staticClass:"money"},[t._v("￥"+t._s(t.order.orderTotalPrice))])]),s("div",{staticClass:"pay-detail"},[s("div",{staticClass:"pay-cell"},[s("span",[t._v("订单总金额：")]),s("span",{staticClass:"red"},[t._v("￥"+t._s(t.order.orderTotalPrice))])]),t._m(0),s("div",{staticClass:"pay-cell"},[s("span",[t._v("配送费用：")]),t.addressList[0]?s("span",{staticClass:"red"},[t._v("+￥0.00")]):s("span",[t._v("请先选择配送地址")])])]),s("div",{staticClass:"pay-way"},[s("span",{staticClass:"tit"},[t._v("支付方式")]),s("div",{staticClass:"pay-cell"},[s("span",[s("van-icon",{attrs:{name:"balance-o"}}),t._v("余额支付（可用 ¥ "+t._s(t.personal.balance)+" 元）")],1),s("span",{staticClass:"red"},[s("van-icon",{attrs:{name:"passed"}})],1)])]),s("div",{staticClass:"buytips"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{placeholder:"选填：买家留言（50字内）",name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.remark},on:{input:function(s){s.target.composing||(t.remark=s.target.value)}}})])]):t._e(),s("div",{staticClass:"footer-fixed"},[s("div",{staticClass:"left"},[t._v(" 实付款："),s("span",[t._v("￥"+t._s(t.order.orderTotalPrice))])]),s("div",{staticClass:"tipsbtn",on:{click:t.submit}},[t._v("提交订单")])])],1)},H=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"pay-cell"},[s("span",[t._v("优惠券：")]),s("span",[t._v("无优惠券可用")])])}];const Y=()=>P.get("/address/list"),X=(t,s)=>P.get("/checkout/order",{params:{mode:t,delivery:0,couponId:0,isUsePoints:0,...s}}),tt=(t,s,e)=>P.post("/checkout/submit",{mode:t,delivery:10,couponId:0,payType:10,isUsePoints:0,...s,remark:e});var st={name:"Pay",data(){return{addressList:[],order:{},personal:{},remark:""}},computed:{mode(){return this.$route.query.mode},obj(){return this.$route.query.obj}},methods:{async getAddress(){const t=await Y();this.addressList=t.data.list},async getOrder(){const t=await X(this.mode,this.obj);this.order=t.data.order,this.personal=t.data.personal},async submit(){await tt(this.mode,this.obj,this.remark);(0,v.A)("支付成功"),this.$router.replace("/myorder")}},mounted(){this.getAddress(),this.getOrder()}},et=st,at=(0,r.A)(et,$,H,!1,null,"cfa67b7c",null),it=at.exports,ot=function(){var t=this,s=t._self._c;return s("div",{staticClass:"prodetail"},[s("van-nav-bar",{attrs:{fixed:"",title:"商品详情页","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-swipe",{attrs:{autoplay:3e3},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[s("div",{staticClass:"custom-indicator"},[t._v(" "+t._s(t.current+1)+" / "+t._s(t.images.length)+" ")])]},proxy:!0}])},t._l(t.images,function(t){return s("van-swipe-item",{key:t.file_id},[s("img",{attrs:{src:t.external_url}})])}),1),s("div",{staticClass:"info"},[s("div",{staticClass:"title"},[s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(t.detail.goods_price_min))]),s("span",{staticClass:"oldprice"},[t._v("￥"+t._s(t.detail.goods_price_max))])]),s("div",{staticClass:"sellcount"},[t._v("已售"+t._s(t.detail.goods_sales)+"件")])]),s("div",{staticClass:"msg text-ellipsis-2"},[t._v(" "+t._s(t.detail.goods_name)+" ")]),s("div",{staticClass:"service"},[s("div",{staticClass:"left-words"},[s("span",[s("van-icon",{attrs:{name:"passed"}}),t._v("七天无理由退货")],1),s("span",[s("van-icon",{attrs:{name:"passed"}}),t._v("48小时发货")],1)]),s("div",{staticClass:"right-icon"},[s("van-icon",{attrs:{name:"arrow"}})],1)])]),s("div",{staticClass:"comment"},[s("div",{staticClass:"comment-title"},[s("div",{staticClass:"left"},[t._v("商品评价 ("+t._s(t.comments.total)+"条)")]),s("div",{staticClass:"right"},[t._v("查看更多 "),s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"comment-list"},t._l(t.comments.list,function(e){return s("div",{key:e.comment_id,staticClass:"comment-item"},[s("div",{staticClass:"top"},[s("img",{attrs:{src:e.user.avatar_url||t.defaultImg,alt:""}}),s("div",{staticClass:"name"},[t._v(t._s(e.user.nick_name))]),s("van-rate",{attrs:{size:16,value:e.score/2,color:"#ffd21e","void-icon":"star","void-color":"#eee"}})],1),s("div",{staticClass:"content"},[t._v(t._s(e.content))]),s("div",{staticClass:"time"},[t._v(t._s(e.create_time))])])}),0)]),s("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.detail.content)}}),s("div",{staticClass:"footer"},[s("div",{staticClass:"icon-home",on:{click:function(s){return t.$router.push("/")}}},[s("van-icon",{attrs:{name:"wap-home-o"}}),s("span",[t._v("首页")])],1),s("div",{staticClass:"icon-cart",on:{click:function(s){return t.$router.push("/cart")}}},[t.cartTotal>0?s("span",{staticClass:"num"},[t._v(t._s(t.cartTotal))]):t._e(),s("van-icon",{attrs:{name:"shopping-cart-o"}}),s("span",[t._v("购物车")])],1),s("div",{staticClass:"btn-add",on:{click:t.addCart}},[t._v("加入购物车")]),s("div",{staticClass:"btn-buy",on:{click:t.buyNow}},[t._v("立刻购买")])]),s("van-action-sheet",{attrs:{title:"cart"===t.mode?"加入购物车":"立刻购买"},model:{value:t.showPannel,callback:function(s){t.showPannel=s},expression:"showPannel"}},[s("div",{staticClass:"product"},[s("div",{staticClass:"product-title"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.detail.goods_image,alt:""}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"price"},[s("span",[t._v("¥")]),s("span",{staticClass:"nowprice"},[t._v(t._s(t.detail.goods_price_min))])]),s("div",{staticClass:"count"},[s("span",[t._v("库存")]),s("span",[t._v(t._s(t.detail.stock_total))])])])]),s("div",{staticClass:"num-box"},[s("span",[t._v("数量")]),s("van-stepper",{attrs:{integer:""},model:{value:t.goodsCount,callback:function(s){t.goodsCount=s},expression:"goodsCount"}})],1),s("div",{staticClass:"showbtn"},["cart"===t.mode?s("div",{staticClass:"btn",on:{click:t.addCartAgain}},[t._v(" 加入购物车 ")]):s("div",{staticClass:"btn now",on:{click:t.buyNowCart}},[t._v("立刻购买")])])])])],1)},rt=[];const nt=t=>P.get("/goods/detail",{params:{goodsId:t}}),ct=(t,s)=>P.get("/comment/listRows",{params:{goodsId:t,limit:s}});var lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkBAMAAACCzIhnAAAAKlBMVEXp6en////9/f3o6Ojw8PDj4+Pl5eXh4eHs7Oz7+/v09PTy8vL4+Pj29vY+GdZKAAADDElEQVRYw+3Wv0sbYRjA8ZNwp+Li89YhUQO+b6F0PDTx6NBBtHXpcBDPRkvhakiC1CGghqIIyRCdOqQlHdouUoqlm1Co0KUZhK4tFPvn9MnF5n6+P4R2KT6EhJe8n3y5ewOJduXJXZNr8l+Tecd5uFu6CinbS18+LR06pjJxxl4ATuZD2anMaXMKxHkOl/P6LFVxCnJi3YXAvP34zZWR1A6E54aUVI8j5J4mIcZBRExLr8WKRk5cGdmHyFyYEqI3o2SqJiH5NkRHl5B9iE3HFBJjI07StpDoC3Ey7QrJfBviYwiJCwmzLCQ7SeRCSNaTyEtTQFKbSSTtishsIrEFxBi6Jn+FFAWk+iSR1PnEyHWTSObM5pJSG5KnxSWPgDMdk0ce88gMl6zzyE0uWRnsoWFyziUubiWMAiMM8AmdtwT4zL38fJcxRnAXw6EI+0sGBpfoTUJIbxfF6ZnL5aTNP/0DklSht1w+KVFK4xVY1vjkqEkSKtltAdH2IF6Bjisi1vd4BfSGiByukWiFjtvi35dKO1qBI01M8AZEKtmahKQ2wxVK07aEaCuRCj3XZKTSDl8L6FIyPESCFZisSYm2F76Wjisn5TZlgYrekJPWLPErdKKm8kfxGfgVODFVyHATBpXJbU2FpDYGdwzGi2rkzqBC064a2fIrSP5VZTZQsZVIa8i/Y1M1JTJ86p9LZrWhdpSB01c6SqtJ/ApM1RtSYmDErzB4b0uJc0qYXyEsUzUlpDoKNFgh9LZjCkn1KTAWqhD4umvyScrJUULDFTTvsMMhxu4YimiFUfhVLSSTvPsAUMQqhMKbw0ICGckXf3giVsEHZO6vxsiIVewC7kqsUAZksR4lerENjPAquCCLhTAxtrv4Lr+CT6Rlh4hzCpSKKozQrGUGiDUKjIkrjMBEvTEg+FXsfyJWiLfRm96LV+unGPy0B6R83NuI73qAeKq/9h4epjgZ6w/Rt8Db2EeBCq4DFdQztUuy2mWKA0d9oq8RVULTNY+UMaKcyfdIao+oE/rKRqIvsCtMtpT7DVEPKD7Ga13IAAAAAElFTkSuQmCC",dt={methods:{loginConfirm(){return!this.$store.getters.token&&(this.$dialog.confirm({title:"温馨提示",message:"此时需要先登录才能继续操作哦",confirmButtonText:"去登录",cancelButtonText:"再逛逛"}).then(()=>{this.$router.replace({path:"/login",query:{backUrl:this.$route.fullPath}})}).catch(()=>{}),!0)}}},ut={name:"ProDetail",mixins:[dt],data(){return{images:[],current:0,detail:{},comments:[],defaultImg:lt,mode:"cart",showPannel:!1,goodsCount:1,cartTotal:0}},methods:{onChange(t){this.current=t},addCart(){this.mode="cart",this.showPannel=!0},buyNow(){this.mode="buy",this.showPannel=!0},buyNowCart(){this.loginConfirm()||this.$store.getters.token&&this.$router.push({path:"/pay",query:{mode:"buyNow",obj:{goodsId:this.$route.params.id,goodsNum:this.goodsCount,goodsSkuId:0}}})},async addCartAgain(){if(this.loginConfirm())return;const t=await k(this.$route.params.id,this.goodsCount,0);this.cartTotal=t.data.cartTotal,console.log(this.cartTotal),this.showPannel=!1,this.$toast.success("成功加入购物车")}},async mounted(){const t=await nt(this.$route.params.id);this.detail=t.data.detail,this.images=this.detail.goods_images;const s=await ct(this.$route.params.id,3);this.comments=s.data}},mt=ut,vt=(0,r.A)(mt,ot,rt,!1,null,"464ab612",null),pt=vt.exports,ht=function(){var t=this,s=t._self._c;return s("div",{staticClass:"search"},[s("van-nav-bar",{attrs:{title:"商品搜索","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词",clearable:""},scopedSlots:t._u([{key:"action",fn:function(){return[s("div",{on:{click:function(s){return t.goSearch(t.searchKey)}}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.searchKey,callback:function(s){t.searchKey=s},expression:"searchKey"}}),s("div",{staticClass:"search-history"},[s("div",{staticClass:"title"},[s("span",[t._v("最近搜索")]),s("van-icon",{attrs:{name:"delete-o",size:"16"},on:{click:t.clear}})],1),t.history.length?s("div",{staticClass:"list"},t._l(t.history,function(e){return s("div",{key:e,staticClass:"list-item",on:{click:function(s){return t.goSearch(e)}}},[t._v(" "+t._s(e)+" ")])}),0):t._e()])],1)},gt=[],ft={name:"Search",data(){return{searchKey:"",history:y()}},methods:{goSearch(t){const s=this.history.indexOf(t);-1!==s?(this.history.splice(s,1),this.history.unshift(t),_(this.history)):(this.history.unshift(t),_(this.history)),this.$router.push(`/searchlist?goodsName=${t}`)},clear(){this.history=[],_([])}}},Ct=ft,yt=(0,r.A)(Ct,ht,gt,!1,null,"020f9d78",null),_t=yt.exports,At=function(){var t=this,s=t._self._c;return s("div",{staticClass:"home"},[s("van-nav-bar",{attrs:{title:"智慧商城",fixed:""}}),s("van-search",{attrs:{readonly:"",shape:"round",background:"#f1f1f2",placeholder:"请在此输入搜索关键词"},on:{click:function(s){return t.$router.push("/search")}}}),s("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.bannerList,function(t){return s("van-swipe-item",{key:t.imgUrl},[s("img",{attrs:{src:t.imgUrl,alt:""}})])}),1),s("van-grid",{attrs:{"column-num":"5","icon-size":"40"}},t._l(t.navList,function(e){return s("van-grid-item",{key:e.imgUrl,attrs:{icon:e.imgUrl,text:e.text},on:{click:function(s){return t.$router.push("/category")}}})}),1),t._m(0),s("div",{staticClass:"guess"},[s("p",{staticClass:"guess-title"},[t._v("—— 猜你喜欢 ——")]),s("div",{staticClass:"goods-list"},t._l(t.proList,function(t){return s("GoodsItem",{key:t.goods_id,attrs:{item:t}})}),1)])],1)},kt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"main"},[s("img",{attrs:{src:e(8823),alt:""}})])}],bt=function(){var t=this,s=t._self._c;return t.item.goods_name?s("div",{staticClass:"goods-item",on:{click:function(s){return t.$router.push(`/prodetail/${t.item.goods_id}`)}}},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.item.goods_image,alt:""}})]),s("div",{staticClass:"right"},[s("p",{staticClass:"tit text-ellipsis-2"},[t._v(" "+t._s(t.item.goods_name)+" ")]),s("p",{staticClass:"count"},[t._v("已售 "+t._s(t.item.goods_sales)+"件")]),s("p",{staticClass:"price"},[s("span",{staticClass:"new"},[t._v("¥"+t._s(t.item.goods_price_min))]),s("span",{staticClass:"old"},[t._v("¥"+t._s(t.item.goods_price_max))])])])]):t._e()},wt=[],xt={name:"GoodsItem",props:{item:{type:Object,default:()=>{}}}},Lt=xt,St=(0,r.A)(Lt,bt,wt,!1,null,"e723bb3c",null),It=St.exports;const Mt=()=>P.get("/page/detail",{params:{pageId:0}});var Pt={name:"Home",components:{GoodsItem:It},data(){return{bannerList:[],navList:[],proList:[]}},methods:{async getHome(){const{data:{pageData:t}}=await Mt();this.bannerList=t.items[1].data,this.navList=t.items[3].data,this.proList=t.items[6].data}},mounted(){this.getHome()}},zt=Pt,Tt=(0,r.A)(zt,At,kt,!1,null,"c75eb578",null),Zt=Tt.exports,Gt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"cart"},[s("van-nav-bar",{attrs:{title:"购物车",fixed:""}}),t.$store.getters.token&&t.cartList.length>0?s("div",{staticClass:"cart-box"},[s("div",{staticClass:"cart-title"},[s("span",{staticClass:"all"},[t._v("共"),s("i",[t._v(t._s(t.goodsCount))]),t._v("件商品")]),s("span",{staticClass:"edit",on:{click:function(s){t.isEdit=!t.isEdit}}},[s("van-icon",{attrs:{name:"edit"}}),t._v(" 编辑 ")],1)]),s("div",{staticClass:"cart-list"},t._l(t.cartList,function(e){return s("div",{key:e.goods_id,staticClass:"cart-item"},[s("van-checkbox",{attrs:{value:e.isChecked},on:{click:function(s){return t.toggle(e.goods_id)}}}),s("div",{staticClass:"show"},[s("img",{attrs:{src:e.goods.goods_image,alt:""}})]),s("div",{staticClass:"info"},[s("span",{staticClass:"tit text-ellipsis-2"},[t._v(t._s(e.goods.goods_name))]),s("span",{staticClass:"bottom"},[s("div",{staticClass:"price"},[t._v(" ¥ "),s("span",[t._v(t._s(e.goods.goods_price_min))])]),s("div",{staticClass:"count-box"},[s("van-stepper",{attrs:{value:e.goods_num},on:{change:s=>t.changeNum(s,e.goods_id,e.goods_sku_id)}})],1)])])],1)}),0),s("div",{staticClass:"footer-fixed"},[s("div",{staticClass:"all-check"},[s("van-checkbox",{attrs:{"icon-size":"18",value:t.isAllChecked},on:{click:t.allChecked}}),t._v(" 全选 ")],1),s("div",{staticClass:"all-total"},[s("div",{staticClass:"price"},[s("span",[t._v("合计：")]),s("span",[t._v("¥ "),s("i",{staticClass:"totalPrice"},[t._v(t._s(t.selGoodsTotalPrice))])])]),t.isEdit?s("div",{staticClass:"delete",class:{disabled:0===t.selGoodsCount},on:{click:t.deleteCart}},[t._v(" 删除 ")]):s("div",{staticClass:"goPay",class:{disabled:0===t.selGoodsCount},on:{click:t.goPay}},[t._v(" 结算("+t._s(t.selGoodsCount)+") ")])])])]):s("div",{staticClass:"empty-cart"},[s("img",{attrs:{src:e(6661),alt:""}}),s("div",{staticClass:"tips"},[t._v("您的购物车是空的, 快去逛逛吧")]),s("div",{staticClass:"btn",on:{click:function(s){return t.$router.push("/")}}},[t._v("去逛逛")])])],1)},Kt=[],Jt=(e(1701),{name:"Cart",data(){return{isEdit:!1}},watch:{isEdit(t){t?this.$store.commit("cart/allChecked",!1):this.$store.commit("cart/allChecked",!0)}},computed:{...(0,p.L8)("cart",["goodsCount","selGoodsCount","selGoodsList","selGoodsTotalPrice","isAllChecked"]),...(0,p.aH)("cart",["cartList"])},methods:{deleteCart(){const t=this.selGoodsList.map(t=>t.id);this.$store.dispatch("cart/delSelect",t),this.isEdit=!1},toggle(t){this.$store.commit("cart/toggleChecked",t)},allChecked(){this.$store.commit("cart/allChecked",!this.isAllChecked)},changeNum(t,s,e){this.$store.dispatch("cart/updateCartNum",{goodsId:s,goodsNum:t,goodsSkuId:e})},goPay(){this.selGoodsList.length>0&&this.$router.push({path:"/pay",query:{obj:{cartIds:this.selGoodsList.map(t=>t.id).join(",")},mode:"cart"}})}},mounted(){this.$store.getters.token&&this.$store.dispatch("cart/getCartList")}}),Nt=Jt,jt=(0,r.A)(Nt,Gt,Kt,!1,null,"3addb128",null),Et=jt.exports,Ot=function(){var t=this,s=t._self._c;return s("div",{staticClass:"category"},[s("van-nav-bar",{attrs:{title:"全部分类",fixed:""}}),s("van-search",{attrs:{readonly:"",shape:"round",background:"#f1f1f2",placeholder:"请输入搜索关键词"},on:{click:function(s){return t.$router.push("/search")}}}),s("div",{staticClass:"list-box"},[s("div",{staticClass:"left"},[s("ul",t._l(t.list,function(e,a){return s("li",{key:e.category_id},[s("a",{class:{active:a===t.activeIndex},attrs:{href:"javascript:;"},on:{click:function(s){t.activeIndex=a}}},[t._v(t._s(e.name))])])}),0)]),s("div",{staticClass:"right"},t._l(t.list[t.activeIndex]?.children,function(e){return s("div",{key:e.category_id,staticClass:"cate-goods",on:{click:function(s){return t.$router.push(`/searchlist?categoryId=${e.category_id}`)}}},[s("img",{attrs:{src:e.image?.external_url,alt:""}}),s("p",[t._v(t._s(e.name))])])}),0)])],1)},Ut=[];const Ft=t=>P.get("/goods/list",t),Bt=()=>P.get("/category/list");var qt={name:"Category",created(){this.getCategoryList()},data(){return{list:[],activeIndex:0}},methods:{async getCategoryList(){const{data:{list:t}}=await Bt();this.list=t}}},Wt=qt,Dt=(0,r.A)(Wt,Ot,Ut,!1,null,"5389475a",null),Rt=Dt.exports,Qt=function(){var t=this,s=t._self._c;return s("div")},Vt=[],$t={name:"User"},Ht=$t,Yt=(0,r.A)(Ht,Qt,Vt,!1,null,null,null),Xt=Yt.exports,ts=function(){var t=this,s=t._self._c;return s("div",{staticClass:"search"},[s("van-nav-bar",{attrs:{fixed:"",title:"商品列表","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:this.$route.query.goodsName||"搜索商品","show-action":""},on:{click:function(s){return t.$router.push("/search")}},scopedSlots:t._u([{key:"action",fn:function(){return[s("van-icon",{staticClass:"tool",attrs:{name:"apps-o"}})]},proxy:!0}])}),t._m(0),s("div",{staticClass:"goods-list"},t._l(t.goodsList,function(t){return s("GoodsItem",{key:t.goods_id,attrs:{item:t}})}),1)],1)},ss=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"sort-btns"},[s("div",{staticClass:"sort-item"},[t._v("综合")]),s("div",{staticClass:"sort-item"},[t._v("销量")]),s("div",{staticClass:"sort-item"},[t._v("价格")])])}],es={name:"SearchList",data(){return{goodsList:[],goodsInfo:{categoryId:this.$route.query.categoryId,goodsName:this.$route.query.goodsName,page:1}}},components:{GoodsItem:It},async mounted(){const t=await Ft(this.goodsInfo);this.goodsList=t.data.list.data}},as=es,is=(0,r.A)(as,ts,ss,!1,null,"2b29d80c",null),os=is.exports;a.Ay.use(d.Ay);const rs=[{path:"/login",component:N},{path:"/",redirect:"/home",component:B,children:[{path:"/home",component:Zt},{path:"/cart",component:Et},{path:"/category",component:Rt},{path:"/user",component:Xt}]},{path:"/myorder",component:V},{path:"/pay",component:it},{path:"/prodetail/:id",component:pt},{path:"/search",component:_t},{path:"/searchlist",component:os}],ns=new d.Ay({routes:rs});ns.beforeEach((t,s,e)=>{const a=["/pay","/myorder"];if(a.includes(t.path)){const t=S.getters.token;t?e():e("/login")}else e()});var cs=ns,ls=(e(3425),e(6141)),ds=(e(7231),e(1755)),us=(e(6117),e(7555)),ms=(e(4510),e(1864)),vs=(e(6443),e(689)),ps=(e(2636),e(6579)),hs=(e(9851),e(1431)),gs=(e(7057),e(6749)),fs=(e(79),e(756)),Cs=(e(4537),e(2849)),ys=(e(9125),e(2665)),_s=(e(9867),e(4648)),As=(e(9809),e(4365)),ks=(e(6530),e(932)),bs=(e(4368),e(6885)),ws=(e(3212),e(6874));a.Ay.use(ws.A),a.Ay.use(bs.A),a.Ay.use(ks.A),a.Ay.use(As.A),a.Ay.use(_s.A),a.Ay.use(ys.A),a.Ay.use(Cs.A),a.Ay.use(fs.A),a.Ay.use(gs.A),a.Ay.use(hs.A),a.Ay.use(ps.A),a.Ay.use(vs.A),a.Ay.use(ws.A),a.Ay.use(v.A),a.Ay.use(ms.A),a.Ay.use(us.A),a.Ay.use(ds.A),a.Ay.use(ls.A),a.Ay.config.productionTip=!1,new a.Ay({router:cs,store:S,render:t=>t(l)}).$mount("#app")},6661:function(t){t.exports="data:image/png;base64,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"},8823:function(t,s,e){t.exports=e.p+"img/main.95d4fe07.png"}},s={};function e(a){var i=s[a];if(void 0!==i)return i.exports;var o=s[a]={exports:{}};return t[a].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(s,a,i,o){if(!a){var r=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],o=t[d][2];for(var n=!0,c=0;c<a.length;c++)(!1&o||r>=o)&&Object.keys(e.O).every(function(t){return e.O[t](a[c])})?a.splice(c--,1):(n=!1,o<r&&(r=o));if(n){t.splice(d--,1);var l=i();void 0!==l&&(s=l)}}return s}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,i,o]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.p="/shopping-project-lcr/"}(),function(){var t={524:0};e.O.j=function(s){return 0===t[s]};var s=function(s,a){var i,o,r=a[0],n=a[1],c=a[2],l=0;if(r.some(function(s){return 0!==t[s]})){for(i in n)e.o(n,i)&&(e.m[i]=n[i]);if(c)var d=c(e)}for(s&&s(a);l<r.length;l++)o=r[l],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(d)},a=self["webpackChunkvue2_shopping"]=self["webpackChunkvue2_shopping"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=e.O(void 0,[504],function(){return e(3857)});a=e.O(a)})();
//# sourceMappingURL=app.7dd2daae.js.map